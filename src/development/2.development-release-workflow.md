# Development and Release Workflow

## Environments

### Live

* Production environment
* Deployed from tag release

### Pre-release

* Regression test environment
* Deployed from `golive/*` release
* Only available when we need to do a release

### Stage

* Testing environment
* Configuration same as live environment
* Connect to Stage Global Login service
* Deployed from `trunk` branch

### Sandbox

* Playground for developers
* Deployed from `develop` branch
* Connect to Stage Global Login service
* Global login for CORE disable (so that we donâ€™t need to do MFA)

## Branches

### trunk

* Main branch of the repo
* Auto deploy to the `stage` environment
* Pull Request require checks(SonarClould, code review)

### develop

* Playground for developer
* Auto deploy to the `sandbox` environment
* Do not require pull request checks. Developer can push code to `develop` branch whenever needed, including debug codes

### feature/bugfix/hotfix branch

* Temporary branch, used for development
* Auto deleted after pull request get merged
* Naming convention `{prefix}/{JIRA story code}/{JIRA story title}`
  * `feature/CORE-1234/Example-feature-core-story`
  * `bugfix/AV2-123/Example-bugfix-app-story`
  * `hotfix/CUT-123/Example-hotfix-cutie-story`

### release candicate branch

* Temporary branch, used for release
* Deleted after release
* Naming convention `golive/{version}`
  * `golive/1.3.5`

## Development workflow

* Feature/bugfix development
  * Branch out from the `golive/*` branch
  * Once development finished, create PR to `trunk` branch for testing
  * Once testing passed, merge the feature branch to `golive/*` branch
* Hotfix development
  * Branch out from the latest released tag
  * Once development finished, merge the hotfix branch to `trunk` branch for testing
  * Once testing passed, create a tag from the hotfix branch and release the tag

![Workflow](./2.workflow.drawio.svg)

## Release workflow

1. Announce in Slack release channel that we are going to do a release
   1. Stop merging code to `golive/*` branch
   2. Define Regression and PVT scope - Risk Assess areas
2. Deploy `golive/*` branch to `pre-release` environment
3. QA start regression test on `pre-release` environment
   1. Hotfix on `golive/*` branch if defects found
4. Create a new tag on `golive/*` branch once regression test finish
5. Compare the new tag with the live tag to make sure the code changes in the new tag are correct to be released
6. Announce the scheduled release time in Slack release channel
7. Trigger the release
8. QA do PVT on live
9. Announce the release in Slack to broader team
